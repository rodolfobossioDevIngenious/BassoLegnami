import{r as s,h as e}from"./p-ee0b9025.js";import{S as t}from"./p-c74b54ba.js";import{p as a}from"./p-971980b1.js";import{g as i}from"./p-8f8bc806.js";import{T as r}from"./p-37df3757.js";import"./p-a3b5bd35.js";import"./p-80de33dc.js";import"./p-ccd51ea4.js";import"./p-e0c1fede.js";import"./p-f1ec68ec.js";import"./p-93cac3a6.js";import"./p-d88cb309.js";import"./p-82db2ff5.js";import"./p-949334ec.js";import"./p-83f217d4.js";let l=class{constructor(e){s(this,e),this.selectList={items:[],isFlagsEnum:!1}}async componentWillLoad(){null==this.propertyModel.expressions[t.Json]&&(this.propertyModel.expressions[t.Json]=JSON.stringify(this.propertyDescriptor.defaultValue)),this.currentValue=this.propertyModel.expressions[t.Json]||"[]"}onCheckChanged(e){const s=e.target,r=s.checked,i=s.value;if(this.selectList.isFlagsEnum){let e=parseInt(this.currentValue);r?e|=parseInt(i):e&=~parseInt(i),this.currentValue=e.toString()}else{let e=a(this.currentValue);e=r?[...e,i].distinct():e.filter((e=>e!==i)),this.currentValue=JSON.stringify(e)}this.propertyModel.expressions[t.Json]=this.currentValue.toString()}onDefaultSyntaxValueChanged(e){this.currentValue=e.detail}async componentWillRender(){this.selectList=await i(this.serverUrl,this.propertyDescriptor)}render(){const s=this.propertyDescriptor,t=this.propertyModel,r=s.name,i=this.selectList,l=i.items,o=i.isFlagsEnum?this.currentValue:a(this.currentValue)||[];return e("elsa-property-editor",{activityModel:this.activityModel,propertyDescriptor:s,propertyModel:t,onDefaultSyntaxValueChanged:e=>this.onDefaultSyntaxValueChanged(e),"single-line":!0},e("div",{class:"elsa-max-w-lg elsa-space-y-3 elsa-my-4"},l.map(((s,t)=>{const a=`${r}_${t}`,l="string"==typeof s,p=l?s:s.value,n=l?s:s.text,c=i.isFlagsEnum?(parseInt(this.currentValue)&parseInt(p))==parseInt(p):o.findIndex((e=>e==p))>=0;return e("div",{class:"elsa-relative elsa-flex elsa-items-start"},e("div",{class:"elsa-flex elsa-items-center elsa-h-5"},e("input",{id:a,type:"checkbox",checked:c,value:p,onChange:e=>this.onCheckChanged(e),class:"focus:elsa-ring-blue-500 elsa-h-4 elsa-w-4 elsa-text-blue-600 elsa-border-gray-300 elsa-rounded"})),e("div",{class:"elsa-ml-3 elsa-mt-1 elsa-text-sm"},e("label",{htmlFor:a,class:"elsa-font-medium elsa-text-gray-700"},n)))}))))}};r.injectProps(l,["serverUrl"]);export{l as elsa_check_list_property};