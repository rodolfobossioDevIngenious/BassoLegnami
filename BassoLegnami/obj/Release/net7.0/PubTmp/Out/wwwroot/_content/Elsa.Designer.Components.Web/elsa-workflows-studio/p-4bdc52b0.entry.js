import{r as e,c as s,h as t}from"./p-ee0b9025.js";let a=class{constructor(t){e(this,t),this.valueChanged=s(this,"valueChanged",7),this.placeHolder="Add tag",this.values=[],this.currentValues=[]}valuesChangedHandler(e){this.currentValues=e||[]}componentWillLoad(){this.currentValues=this.values}async addItem(e){const t=[...this.currentValues];t.push(e),this.currentValues=t.distinct(),await this.valueChanged.emit(t)}async onInputKeyDown(e){if("Enter"!=e.key)return;e.preventDefault();const t=e.target,a=t.value.trim();0!=a.length&&(await this.addItem(a),t.value="")}async onInputBlur(e){const t=e.target,a=t.value.trim();0!=a.length&&(await this.addItem(a),t.value="")}async onDeleteTagClick(e,t){e.preventDefault(),this.currentValues=this.currentValues.filter((e=>e!==t)),await this.valueChanged.emit(this.currentValues)}render(){let e=this.currentValues||[];Array.isArray(e)||(e=[]);const a=JSON.stringify(e);return t("div",{class:"elsa-py-2 elsa-px-3 elsa-bg-white elsa-shadow-sm elsa-border elsa-border-gray-300 elsa-rounded-md"},e.map((e=>t("a",{href:"#",onClick:t=>this.onDeleteTagClick(t,e),class:"elsa-inline-block elsa-text-xs elsa-bg-blue-400 elsa-text-white elsa-py-2 elsa-px-3 elsa-mr-1 elsa-mb-1 elsa-rounded"},t("span",null,e),t("span",{class:"elsa-text-white hover:elsa-text-white elsa-ml-1"},"×")))),t("input",{type:"text",id:this.fieldId,onKeyDown:e=>this.onInputKeyDown(e),onBlur:e=>this.onInputBlur(e),class:"elsa-tag-input elsa-inline-block elsa-text-sm elsa-outline-none focus:elsa-outline-none elsa-border-none shadow:none focus:elsa-border-none focus:elsa-border-transparent focus:shadow-none",placeholder:this.placeHolder}),t("input",{type:"hidden",name:this.fieldName,value:a}))}static get watchers(){return{values:["valuesChangedHandler"]}}};a.style=".elsa-tag-input:focus{box-shadow:none!important;outline:none!important}";let l=class{constructor(t){e(this,t),this.valueChanged=s(this,"valueChanged",7),this.placeHolder="Add tag",this.values=[],this.dropdownValues=[],this.currentValues=[]}valuesChangedHandler(e){let t=[];const a=this.dropdownValues||[];e&&e.forEach((e=>{a.forEach((a=>{e===a.value&&t.push(a)}))})),this.currentValues=t||[]}componentWillLoad(){const e=this.dropdownValues||[];let t=[];this.values.forEach((a=>{e.forEach((e=>{a===e.value&&t.push(e)}))})),this.currentValues=t}async onTagSelected(e){e.preventDefault();const t=e.target,a={text:t.options[t.selectedIndex].text.trim(),value:t.value};if(0==a.value.length)return;const s=[...this.currentValues];s.push(a),this.currentValues=s.distinct(),t.value="Add",await this.valueChanged.emit(s)}async onDeleteTagClick(e,t){e.preventDefault(),this.currentValues=this.currentValues.filter((e=>e.value!==t.value)),await this.valueChanged.emit(this.currentValues)}render(){let e=this.currentValues||[],a=this.dropdownValues.filter((t=>e.findIndex((e=>e.value===t.value))<0));Array.isArray(e)||(e=[]);const s=JSON.stringify(e.map((e=>e.value)));return t("div",{class:"elsa-py-2 elsa-px-3 elsa-bg-white elsa-shadow-sm elsa-border elsa-border-gray-300 elsa-rounded-md"},e.map((e=>t("a",{href:"#",onClick:t=>this.onDeleteTagClick(t,e),class:"elsa-inline-block elsa-text-xs elsa-bg-blue-400 elsa-text-white elsa-py-2 elsa-px-3 elsa-mr-1 elsa-mb-1 rounded"},t("input",{type:"hidden",value:e.value}),t("span",null,e.text),t("span",{class:"elsa-text-white hover:elsa-text-white elsa-ml-1"},"×")))),t("select",{id:this.fieldId,class:"elsa-inline-block elsa-text-xs elsa-py-2 elsa-px-3 elsa-mr-1 elsa-mb-1 elsa-pr-8 elsa-border-gray-300 focus:elsa-outline-none focus:elsa-ring-blue-500 focus:elsa-border-blue-500 elsa-rounded",onChange:e=>this.onTagSelected(e)},t("option",{value:"Add",disabled:!0,selected:!0},this.placeHolder),a.map((e=>t("option",{value:e.value},e.text)))),t("input",{type:"hidden",name:this.fieldName,value:s}))}static get watchers(){return{values:["valuesChangedHandler"]}}};export{a as elsa_input_tags,l as elsa_input_tags_dropdown};