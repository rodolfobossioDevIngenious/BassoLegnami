import{r as s,h as e}from"./p-ee0b9025.js";import"./p-c74b54ba.js";import{E as t}from"./p-d88cb309.js";import{e as a}from"./p-93cac3a6.js";import{a as i}from"./p-ccd51ea4.js";import"./p-971980b1.js";import"./p-82db2ff5.js";import"./p-949334ec.js";import{T as l}from"./p-37df3757.js";import"./p-e0c1fede.js";import"./p-f1ec68ec.js";import"./p-a3b5bd35.js";import"./p-80de33dc.js";import"./p-83f217d4.js";let r=class{constructor(t){s(this,t),this.editorHeight="6em",this.singleLineMode=!1,this.activityValidatingContext=null,this.configureComponentCustomButtonContext=null}async componentWillLoad(){this.currentValue=this.propertyModel.expressions.Literal,await this.configureComponentCustomButton(),this.validate(this.currentValue)}async componentDidLoad(){const t=await i(this.serverUrl),e={propertyName:this.propertyDescriptor.name,activityTypeName:this.activityModel.type},a=await t.scriptingApi.getJavaScriptTypeDefinitions(this.workflowDefinitionId,e);await this.monacoEditor.addJavaScriptLib(a,"defaultLib:lib.es6.d.ts")}async configureComponentCustomButton(){this.configureComponentCustomButtonContext={component:"elsa-script-property",activityType:this.activityModel.type,prop:this.propertyDescriptor.name,data:null},await a.emit(t.ComponentLoadingCustomButton,this,this.configureComponentCustomButtonContext)}mapSyntaxToLanguage(t){switch(t){case"JavaScript":return"javascript";case"Liquid":return"handlebars";default:return"plaintext"}}onComponentCustomButtonClick(e){e.preventDefault(),a.emit(t.ComponentCustomButtonClick,this,{component:"elsa-script-property",activityType:this.activityModel.type,prop:this.propertyDescriptor.name,params:null})}onMonacoValueChanged(t){this.currentValue=t.value,this.validate(this.currentValue)}validate(e){this.activityValidatingContext={activityType:this.activityModel.type,prop:this.propertyDescriptor.name,value:e,data:null,isValidated:!1,isValid:!1},a.emit(t.ActivityPluginValidating,this,this.activityValidatingContext)}render(){const t=this.propertyDescriptor,a=this.syntax,i=this.mapSyntaxToLanguage(a),s=t.name,o=s,l=t.hint,n=this.currentValue;return e("div",null,e("div",{class:"elsa-flex"},e("div",{class:""},e("label",{htmlFor:s,class:"elsa-block elsa-text-sm elsa-font-medium elsa-text-gray-700"},t.label||s)),e("div",{class:"elsa-flex-1"},e("div",null,e("div",{class:"hidden sm:elsa-block"},e("nav",{class:"elsa-flex elsa-flex-row-reverse","aria-label":"Tabs"},e("span",{class:"elsa-bg-blue-100 elsa-text-blue-700 elsa-px-3 elsa-py-2 elsa-font-medium elsa-text-sm elsa-rounded-md"},a)))))),e("div",{class:"elsa-mt-1"},e("elsa-monaco",{value:n,language:i,"editor-height":this.editorHeight,"single-line":this.singleLineMode,onValueChanged:t=>this.onMonacoValueChanged(t.detail),ref:t=>this.monacoEditor=t})),l?e("p",{class:"elsa-mt-2 elsa-text-sm elsa-text-gray-500"},l):void 0,e("input",{type:"hidden",name:o,value:n}),(()=>{if(null!=this.activityValidatingContext&&this.activityValidatingContext.isValidated)return e("div",{class:"elsa-mt-3"},e("p",{class:`elsa-mt-1 elsa-text-sm elsa-text-${this.activityValidatingContext.isValid?"green":"red"}-500`},this.activityValidatingContext.data))})(),(()=>{if(null!=this.configureComponentCustomButtonContext.data)return e("div",{class:"elsa-mt-3"},e("a",{href:"#",onClick:t=>this.onComponentCustomButtonClick(t),class:"elsa-relative elsa-inline-flex elsa-items-center elsa-px-4 elsa-py-2 elsa-border elsa-border-gray-300 elsa-text-sm elsa-leading-5 elsa-font-medium elsa-rounded-md elsa-text-gray-700 elsa-bg-white hover:elsa-text-gray-500 focus:elsa-outline-none focus:elsa-shadow-outline-blue focus:elsa-border-blue-300 active:elsa-bg-gray-100 active:elsa-text-gray-700 elsa-transition elsa-ease-in-out elsa-duration-150"},this.configureComponentCustomButtonContext.data.label))})())}};l.injectProps(r,["serverUrl","workflowDefinitionId"]);export{r as elsa_script_property};